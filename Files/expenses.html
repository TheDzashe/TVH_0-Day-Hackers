<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kaci Connect - Expenses Page</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  .calculator-btn { transition: all 0.2s ease; }
  .calculator-btn:active { transform: scale(0.95); }
  .calculator-display { min-height: 60px; word-wrap: break-word; word-break: break-all; }
</style>
</head>
<body class="bg-[#F5F5F5] text-gray-800 leading-relaxed font-sans">

<header class="bg-gradient-to-r from-[#007AFF] to-[#0050cc] text-white px-[5%] py-4 flex justify-between items-center shadow-md">
  <div class="text-2xl font-bold">KACI CONNECT</div>
  <ul class="hidden md:flex list-none">
    <li class="mx-4"><a href="premiumPlan.html" class="text-white font-medium hover:text-[#FFFF00] transition">Home</a></li>
  </ul>
  <div class="flex gap-4">
    <button id="logout-btn" class="px-5 py-2 rounded border border-white text-white font-medium hover:bg-white/10 transition">Logout</button>
  </div>
</header>

<div class="max-w-[1200px] mx-auto px-5 py-8 grid grid-cols-1 md:grid-cols-3 gap-6">

  <!-- Calculator -->
  <div class="bg-white rounded-lg p-6 shadow">
    <h3 class="text-lg font-semibold text-[#007AFF] mb-4">Expense Calculator</h3>
    <div id="expense-calculator" class="bg-gray-50 rounded-lg overflow-hidden shadow-inner">
      <div class="p-4 bg-white">
        <div id="calculator-display" class="calculator-display text-right text-2xl font-semibold text-gray-800 py-2 px-3 bg-gray-100 rounded">0</div>
      </div>
      <div class="grid grid-cols-4 gap-2 p-4">
        <button class="calculator-btn col-span-2 bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded" onclick="clearCalculator()">C</button>
        <button class="calculator-btn bg-gray-300 hover:bg-gray-400 font-bold py-3 rounded" onclick="deleteLast()">⌫</button>
        <button class="calculator-btn bg-[#007AFF] hover:bg-[#0050cc] text-white font-bold py-3 rounded" onclick="appendToDisplay('/')">÷</button>

        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('7')">7</button>
        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('8')">8</button>
        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('9')">9</button>
        <button class="calculator-btn bg-[#007AFF] hover:bg-[#0050cc] text-white font-bold py-3 rounded" onclick="appendToDisplay('*')">×</button>

        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('4')">4</button>
        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('5')">5</button>
        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('6')">6</button>
        <button class="calculator-btn bg-[#007AFF] hover:bg-[#0050cc] text-white font-bold py-3 rounded" onclick="appendToDisplay('-')">-</button>

        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('1')">1</button>
        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('2')">2</button>
        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('3')">3</button>
        <button class="calculator-btn bg-[#007AFF] hover:bg-[#0050cc] text-white font-bold py-3 rounded" onclick="appendToDisplay('+')">+</button>

        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('0')">0</button>
        <button class="calculator-btn bg-gray-200 hover:bg-gray-300 font-bold py-3 rounded" onclick="appendToDisplay('.')">.</button>
        <button class="calculator-btn col-span-2 bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded" onclick="calculateResult()">=</button>
      </div>
    </div>
  </div>

  <!-- Expense Form -->
  <div class="bg-white rounded-lg p-6 shadow">
    <h3 class="text-lg font-semibold text-[#007AFF] mb-4">Add/Edit Expense</h3>
    <form id="expense-form" class="space-y-4">
      <input type="hidden" id="expense-id">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Expense Name</label>
        <input id="expense-name" type="text" class="w-full border border-gray-300 rounded px-3 py-2 focus:ring-[#007AFF] focus:border-[#007AFF]" required="">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
        <input id="expense-category" type="text" class="w-full border border-gray-300 rounded px-3 py-2 focus:ring-[#007AFF] focus:border-[#007AFF]" required="">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Amount</label>
        <input id="expense-amount" type="number" class="w-full border border-gray-300 rounded px-3 py-2 focus:ring-[#007AFF] focus:border-[#007AFF]" required="">
      </div>
      <button type="submit" class="w-full bg-[#007AFF] text-white py-2 rounded font-medium hover:bg-[#0050cc] transition" id="submit-btn">Add Expense</button>
    </form>
  </div>

  <!-- Recent Expenses -->
  <div class="bg-white rounded-lg p-6 shadow">
    <h3 class="text-lg font-semibold text-[#007AFF] mb-4">Recent Expenses</h3>
    <ul id="recent-expenses" class="divide-y divide-gray-200"></ul>
  </div>
</div>

<footer class="bg-gradient-to-r from-[#007AFF] to-[#0050cc] text-white px-[5%] py-10 mt-12">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 max-w-[1200px] mx-auto">
    <div>
      <h3 class="text-lg mb-5 pb-2 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-10 after:h-0.5 after:bg-[#FFFF00]">About Us</h3>
      <p class="text-sm">Kaci Connect helps you manage your expenses efficiently with our easy-to-use tools and calculators.</p>
    </div>
    <div>
      <h3 class="text-lg mb-5 pb-2 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-10 after:h-0.5 after:bg-[#FFFF00]">Quick Links</h3>
      <ul class="space-y-2 text-sm">
        <li><a href="#" class="hover:text-[#FFFF00] transition">Home</a></li>
        <li><a href="#" class="hover:text-[#FFFF00] transition">Features</a></li>
        <li><a href="#" class="hover:text-[#FFFF00] transition">Pricing</a></li>
        <li><a href="#" class="hover:text-[#FFFF00] transition">About</a></li>
      </ul>
    </div>
    <div>
      <h3 class="text-lg mb-5 pb-2 relative after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-10 after:h-0.5 after:bg-[#FFFF00]">Contact Info</h3>
      <ul class="space-y-2 text-sm">
        <li>Email: info@kaciconnect.com</li>
        <li>Phone: +27 12 345 6789</li>
        <li>Address: 123 Finance St, Johannesburg</li>
      </ul>
    </div>
  </div>
  <div class="border-t border-white/20 mt-8 pt-6 text-center text-sm">
    <p>&copy; 2025 Kaci Connect. All rights reserved.</p>
  </div>
</footer>

<script>
  // Calculator
  let displayValue = '0'; let shouldResetDisplay=false;
  const updateDisplay = ()=>document.getElementById('calculator-display').textContent = displayValue;
  function appendToDisplay(v){if(shouldResetDisplay){displayValue='';shouldResetDisplay=false;}if(displayValue==='0'&&v!=='.') displayValue=v; else{if(v==='.'&&displayValue.includes('.')){const lo=Math.max(displayValue.lastIndexOf('+'),displayValue.lastIndexOf('-'),displayValue.lastIndexOf('*'),displayValue.lastIndexOf('/')); if(displayValue.substring(lo+1).includes('.')) return;} displayValue+=v;} updateDisplay();}
  function clearCalculator(){displayValue='0';shouldResetDisplay=false;updateDisplay();}
  function deleteLast(){displayValue=displayValue.length>1?displayValue.slice(0,-1):'0';updateDisplay();}
  function calculateResult(){try{const exp=displayValue.replace(/×/g,'*').replace(/÷/g,'/'); const res=Function('"use strict";return('+exp+')')(); displayValue=isFinite(res)?res.toString():'Error';shouldResetDisplay=true;updateDisplay();}catch{displayValue='Error';shouldResetDisplay=true;updateDisplay();}}
  document.addEventListener('keydown',e=>{const k=e.key;if(k>='0'&&k<='9') appendToDisplay(k); else if(k=='.') appendToDisplay('.'); else if('+-*/'.includes(k)) appendToDisplay(k); else if(k=='Enter'||k=='=') calculateResult(); else if(['Escape','c','C'].includes(k)) clearCalculator(); else if(k=='Backspace') deleteLast();});
  updateDisplay();

  // Logout
  document.getElementById('logout-btn').addEventListener('click',()=>{localStorage.removeItem('user'); window.location.href='index.html';});

  // CRUD
  const form = document.getElementById('expense-form');
  const nameInput = document.getElementById('expense-name');
  const categoryInput = document.getElementById('expense-category');
  const amountInput = document.getElementById('expense-amount');
  const idInput = document.getElementById('expense-id');
  const list = document.getElementById('recent-expenses');
  let expenses = JSON.parse(localStorage.getItem('expenses')) || [];

  const renderExpenses=()=>{
    list.innerHTML='';
    let total=0;
    expenses.forEach(exp=>{
      total+=exp.amount;
      const li=document.createElement('li');
      li.className='py-3 flex justify-between items-center';
      li.innerHTML=`<span>${exp.name} (${exp.category})</span>
        <span class="flex gap-2 items-center">
          <span class="font-semibold text-gray-700">R${exp.amount}</span>
          <button class="bg-yellow-400 hover:bg-yellow-500 text-white px-2 py-1 rounded text-sm" onclick="editExpense('${exp.id}')">Edit</button>
          <button class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm" onclick="deleteExpense('${exp.id}')">Delete</button>
        </span>`;
      list.appendChild(li);
    });
    displayValue = total.toString(); updateDisplay(); shouldResetDisplay=true;
  }

  form.addEventListener('submit',e=>{
    e.preventDefault();
    const name=nameInput.value.trim();
    const category=categoryInput.value.trim();
    const amount=parseFloat(amountInput.value);
    if(!name||!category||isNaN(amount)) return;
    const id=idInput.value;
    if(id){
      const idx=expenses.findIndex(e=>e.id===id);
      expenses[idx]={id,name,category,amount};
      idInput.value=''; document.getElementById('submit-btn').textContent='Add Expense';
    } else {expenses.unshift({id:Date.now().toString(),name,category,amount});}
    localStorage.setItem('expenses',JSON.stringify(expenses));
    renderExpenses(); form.reset();
  });

  window.editExpense=(id)=>{
    const e=expenses.find(ex=>ex.id===id);
    nameInput.value=e.name; categoryInput.value=e.category; amountInput.value=e.amount; idInput.value=e.id;
    document.getElementById('submit-btn').textContent='Update Expense';
  }

  window.deleteExpense=(id)=>{
    if(confirm('Are you sure you want to delete this expense?')){
      expenses=expenses.filter(e=>e.id!==id);
      localStorage.setItem('expenses',JSON.stringify(expenses));
      renderExpenses();
    }
  }

  renderExpenses();
</script>

</body>
</html>
